<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile Photo Studio</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <!-- Screen 1: Welcome -->
    <section id="screen-welcome" class="screen active">
        <div class="container">
            <div class="hero">
                <svg class="hero-icon" viewBox="0 0 80 80" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="40" cy="30" r="14" stroke="currentColor" stroke-width="3"/>
                    <path d="M16 68c0-13.255 10.745-24 24-24s24 10.745 24 24" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
                </svg>
                <h1>Profile Photo Studio</h1>
                <p class="subtitle">Get a clean, professional headshot in seconds</p>
            </div>
            <div class="actions">
                <button id="btn-camera" class="btn btn-primary">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M23 19a2 2 0 01-2 2H3a2 2 0 01-2-2V8a2 2 0 012-2h4l2-3h6l2 3h4a2 2 0 012 2z"/>
                        <circle cx="12" cy="13" r="4"/>
                    </svg>
                    Take a Photo
                </button>
                <button id="btn-upload" class="btn btn-secondary">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
                        <polyline points="17 8 12 3 7 8"/>
                        <line x1="12" y1="3" x2="12" y2="15"/>
                    </svg>
                    Upload a Photo
                </button>
            </div>
        </div>
    </section>

    <!-- Screen 2a: Webcam Capture -->
    <section id="screen-capture" class="screen">
        <div class="container">
            <h2>Position your face in the guide</h2>
            <div class="viewfinder">
                <video id="webcam" autoplay playsinline muted></video>
                <canvas id="overlay-canvas"></canvas>
            </div>
            <div class="capture-actions">
                <button id="btn-snap" class="btn btn-primary btn-round" title="Take photo">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <circle cx="12" cy="12" r="10"/>
                    </svg>
                </button>
                <button id="btn-back-capture" class="btn btn-ghost">Back</button>
            </div>
        </div>
    </section>

    <!-- Screen 2b: Upload -->
    <section id="screen-upload" class="screen">
        <div class="container">
            <h2>Upload your photo</h2>
            <div id="drop-zone" class="drop-zone">
                <div class="drop-zone-content">
                    <svg class="drop-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                        <circle cx="8.5" cy="8.5" r="1.5"/>
                        <polyline points="21 15 16 10 5 21"/>
                    </svg>
                    <p>Drag & drop a photo here</p>
                    <span class="drop-zone-or">or</span>
                    <button id="btn-pick-file" class="btn btn-secondary btn-sm">Choose File</button>
                    <input type="file" id="file-input" accept="image/*" hidden>
                </div>
                <div class="drop-zone-preview" hidden>
                    <img id="upload-preview" alt="Preview">
                </div>
            </div>
            <div class="upload-actions">
                <button id="btn-process-upload" class="btn btn-primary" disabled>Process Photo</button>
                <button id="btn-back-upload" class="btn btn-ghost">Back</button>
            </div>
        </div>
    </section>

    <!-- Screen 3: Processing -->
    <section id="screen-processing" class="screen">
        <div class="container">
            <h2>Processing your photo</h2>
            <div class="spinner"></div>
            <div class="steps">
                <div class="step" data-step="0">
                    <span class="step-dot"></span>
                    <span class="step-label">Detecting face</span>
                </div>
                <div class="step" data-step="1">
                    <span class="step-dot"></span>
                    <span class="step-label">Framing headshot</span>
                </div>
                <div class="step" data-step="2">
                    <span class="step-dot"></span>
                    <span class="step-label">Removing background</span>
                </div>
                <div class="step" data-step="3">
                    <span class="step-dot"></span>
                    <span class="step-label">Adjusting lighting</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Screen 4: Result -->
    <section id="screen-result" class="screen">
        <div class="container">
            <h2>Your profile photo</h2>
            <div class="result-card">
                <img id="result-image" alt="Processed headshot">
            </div>
            <div class="color-picker">
                <span class="color-picker-label">Background</span>
                <div class="color-swatches">
                    <button class="swatch swatch-transparent active" data-color="" title="Transparent"></button>
                    <button class="swatch" data-color="#FFFFFF" title="White" style="background:#FFFFFF"></button>
                    <button class="swatch" data-color="#D0EBFF" title="Light Blue" style="background:#D0EBFF"></button>
                    <button class="swatch" data-color="#FFD8D8" title="Soft Pink" style="background:#FFD8D8"></button>
                    <button class="swatch" data-color="#1C3A5F" title="Navy" style="background:#1C3A5F"></button>
                    <button class="swatch" data-color="#000000" title="Black" style="background:#000000"></button>
                </div>
            </div>
            <div class="result-actions">
                <a id="btn-download" class="btn btn-primary" download="profile-photo.png">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
                        <polyline points="7 10 12 15 17 10"/>
                        <line x1="12" y1="15" x2="12" y2="3"/>
                    </svg>
                    Download
                </a>
                <button id="btn-start-over" class="btn btn-secondary">Start Over</button>
            </div>
        </div>
    </section>

    <!-- Error Toast -->
    <div id="error-toast" class="toast" hidden>
        <span id="error-message"></span>
        <button id="btn-dismiss-error" class="toast-close">&times;</button>
    </div>

    <script src="/static/js/app.js"></script>
</body>
</html>
